# 修复测试脚本找不到 checkpoint 文件的问题

## 1. 问题分析

测试脚本在运行时出现错误：`AssertionError: image adapter checkpoint not found`，这是因为测试脚本无法在指定的 checkpoint 路径中找到必要的模型文件。

具体来说，测试脚本在 `test.py` 文件的第 173 行尝试加载 image adapter checkpoint 文件：

```python
files = sorted(glob(args.save_path + "/image_adapter_*.pth"))
assert len(files) > 0, "image adapter checkpoint not found"
```

## 2. 解决方案

### 2.1 修改 test.sh 脚本

修改 `test.sh` 脚本，添加检查 checkpoint 目录是否存在的逻辑，并在 checkpoint 文件不存在时给出明确的错误提示。

### 2.2 修改 test.py 脚本

修改 `test.py` 脚本，添加更友好的错误处理，在 checkpoint 文件不存在时给出明确的错误提示，并提供训练模型的指导。

## 3. 实现步骤

### 3.1 修改 test.sh 脚本

1. 添加检查 checkpoint 目录是否存在的逻辑
2. 如果 checkpoint 目录不存在，给出明确的错误提示
3. 提供训练模型的指导

### 3.2 修改 test.py 脚本

1. 修改断言错误信息，使其更加友好
2. 添加检查 checkpoint 目录是否存在的逻辑
3. 提供训练模型的指导

## 4. 预期效果

- 当 checkpoint 文件不存在时，测试脚本会给出明确的错误提示
- 错误提示中会包含训练模型的指导
- 用户可以根据错误提示正确执行训练步骤，生成必要的 checkpoint 文件